(function(e){function t(t){for(var n,o,a=t[0],c=t[1],u=t[2],f=0,h=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,a=1;a<i.length;a++){var c=i[a];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={main:0},s=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/zuweiser/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push(["8dc6","chunk-vendors"]),i()})({0:function(e,t){},"0063":function(e,t,i){},"0c67":function(e,t,i){},"0f16":function(e,t,i){"use strict";var n=i("6791"),r=i.n(n);r.a},1:function(e,t){},2:function(e,t){},"427a":function(e,t,i){"use strict";var n=i("c61d"),r=i.n(n);r.a},"502a":function(e,t,i){},"649d":function(e,t,i){},6791:function(e,t,i){},"71c7":function(e,t,i){"use strict";var n=i("502a"),r=i.n(n);r.a},"7d00":function(e,t,i){"use strict";var n=i("649d"),r=i.n(n);r.a},"818b":function(e,t,i){"use strict";var n=i("0c67"),r=i.n(n);r.a},"8dc6":function(e,t,i){"use strict";i.r(t);var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",[e._v("Zuweiser")]),i("am-excel-reader",{on:{"excel-overview-loaded":e.onOverviewLoaded}}),e.excelOverview?i("div",{attrs:{id:"sheet-config"}},[i("h2",{attrs:{id:"config-header"}},[e._v("Arbeitslätter & Spalten auswählen")]),i("am-activities-sheet-config",{attrs:{id:"config-activities","excel-overview":e.excelOverview},on:{completed:e.activitiesConfigCompleted}}),i("am-participants-sheet-config",{attrs:{id:"config-participants","excel-overview":e.excelOverview},on:{completed:e.participantsConfigCompleted}})],1):e._e(),i("am-do-matching",{attrs:{config:e.matchConfig},on:{matched:e.onMatched}}),i("am-result-printer",{attrs:{result:e.result}})],1)},s=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v("Aktivitäten")]),i("label",{attrs:{for:"shuffleActivitiesBeforeMatch"}},[e._v(" Vor dem Zuweisen mischen "),i("Explanation",{attrs:{text:"Ohne Mischen ist die Reihenfolge der Einträge in der Tabelle massgebend, d.h. frühe Einträge werden bevorzugt"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.activitiesConfig.shuffleBeforeMatch,expression:"activitiesConfig.shuffleBeforeMatch"}],attrs:{type:"checkbox",name:"shuffleActivitiesBeforeMatch",id:"shuffleActivitiesBeforeMatch"},domProps:{checked:Array.isArray(e.activitiesConfig.shuffleBeforeMatch)?e._i(e.activitiesConfig.shuffleBeforeMatch,null)>-1:e.activitiesConfig.shuffleBeforeMatch},on:{change:function(t){var i=e.activitiesConfig.shuffleBeforeMatch,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);n.checked?o<0&&e.$set(e.activitiesConfig,"shuffleBeforeMatch",i.concat([s])):o>-1&&e.$set(e.activitiesConfig,"shuffleBeforeMatch",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.activitiesConfig,"shuffleBeforeMatch",r)}}}),i("h4",[e._v("Arbeitsblatt")]),i("am-multiselect",{attrs:{values:Object.keys(e.excelOverview.sheets)},on:{input:e.onChange},model:{value:e.activitiesConfig.worksheet,callback:function(t){e.$set(e.activitiesConfig,"worksheet",t)},expression:"activitiesConfig.worksheet"}}),e.activitiesConfig.worksheet?[i("h4",[e._v("Spalten")]),e._l(e.activitiesConfig.fields,(function(t,n){return i("am-multiselect",{key:t.id,attrs:{values:e.excelOverview.sheets[e.activitiesConfig.worksheet],label:e.labels[n]},on:{input:e.onChange},model:{value:e.activitiesConfig.fields[n],callback:function(t){e.$set(e.activitiesConfig.fields,n,t)},expression:"activitiesConfig.fields[key]"}})}))]:e._e()],2)},a=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"explanation",attrs:{title:e.text}},[e._v("?")])},u=[],l={props:["text"]},f=l,h=(i("818b"),i("2877")),d=Object(h["a"])(f,c,u,!1,null,"9dc38d8e",null),p=d.exports,m={components:{Explanation:p},props:["excelOverview"],data(){return{activitiesConfig:{shuffleBeforeMatch:!1,worksheet:"",fields:{id:"",name:"",limit:"",minimum:""}},labels:{worksheet:"Arbeitsblatt",id:"ID",name:"Name",limit:"Limit",minimum:"Minimum"}}},methods:{onChange(){this.activitiesConfig.worksheet&&this.$emit("completed",this.activitiesConfig)}}},v=m,g=Object(h["a"])(v,o,a,!1,null,"70376100",null),b=g.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",[e._v("Datei angeben")]),i("label",{attrs:{for:"file"}}),i("input",{attrs:{type:"file",id:"file"},on:{change:e.loadExcel}}),e._t("default")],2)},y=[],w=i("1146"),C=i.n(w);function x(e,t){var i=e.Sheets[t];O(i);return k(i)}function O(e){var t=C.a.utils.sheet_to_json(e);return Object.keys(t[0])}function k(e){return C.a.utils.sheet_to_json(e)}function P(e){var t=new FileReader,i=new Promise((function(e,i){t.onload=function(t){var n=t.target.result;try{var r=C.a.read(n,{type:"binary"});e(r)}catch(t){i(t)}}}));return t.readAsBinaryString(e),i}function M(e){for(var t={},i=0,n=e.SheetNames;i<n.length;i++){var r=n[i],s=C.a.utils.sheet_to_json(e.Sheets[r]);t[r]=Object.keys(s[0])}return{sheets:t}}var j=i("020f"),$=i.n(j),B=i("6747"),E=i.n(B),S=i("e2a0"),A=i.n(S),D=function(){function e(e){this.courseData=e,this.students=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.courseData.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this.courseData.limit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){var e;return e=this.courseData.minimum,null!==e&&void 0!==e?e:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.courseData.name},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e}(),N=function(){function e(e){this.studentData=e,this.matched=!1}return Object.defineProperty(e.prototype,"id",{get:function(){return this.studentData.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priorities",{get:function(){return this.studentData.priorities},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.studentData.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this.studentData.firstName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"class",{get:function(){return this.studentData.class},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.firstName+" "+this.name},e}();function T(e,t){var i={};return $()(t,(function(t,n){A()(t)?i[n]=e[t]:E()(t)&&(i[n]=[],$()(t,(function(t,r){i[n].push(e[t.column])})))})),i}function V(e,t){var i=T(e,t);return new N(i)}function R(e,t){var i=T(e,t);return new D(i)}var z=i("9ab4"),L=i("2769"),Z=i.n(L),G=i("eed6"),I=i.n(G),K=i("5a3a"),U=i.n(K),W=i("f560"),F=i.n(W),H=function(e){function t(i,n,r){void 0===r&&(r={});var s=e.call(this,n+" not unique for entity "+i)||this;return Object.setPrototypeOf(s,t.prototype),s.entityType=i,s.propertyName=n,s.entity=r,s}return Object(z["a"])(t,e),t}(Error),J=function(e){function t(i,n,r){void 0===r&&(r={});var s=e.call(this,i+" with id="+n+" does not exist. Referred to by "+r+".")||this;return Object.setPrototypeOf(s,t.prototype),s.entityType=i,s.id=n,s.referrer=r,s}return Object(z["a"])(t,e),t}(Error),q=function(e,t,i){for(var n=U()(i).map((function(){return[]})),r=function(e){n.forEach((function(i,r){e.priorities[r]===t.id&&n[r].push(e)}))},s=0,o=e;s<o.length;s++){var a=o[s];r(a)}return n},Q=function(e){return e.filter((function(e){return!e.matched}))},X=function(e){return e.filter((function(e){return e.limit>0}))},Y=function(e,t,i){var n=0,r=[],s=t.map((function(e){return e.slice(0)}));while(r.length<e.minimum&&s.flat().length>0&&n<i){if(0===s[n].length&&n<i&&(n+=1),r.push(s[n].shift()),0===s.flat().length&&r.length<e.minimum)return{priority:-1,index:-1};if(r.length===e.minimum)break}var o=t[n].length-s[n].length-1;return{priority:n,index:o}},ee=function(e,t,i){for(var n=0,r=U()(i.priority);n<r.length;n++)for(var s=r[n],o=0,a=U()(t[s].length);o<a.length;o++){a[o];var c=t[s].shift();c.matched?console.warn(c.name+" already matched!!"):(e.students.push(c),c.matched=!0)}for(var u=0,l=U()(i.index+1);u<l.length;u++){l[u],c=t[i.priority].shift();c.matched?console.warn(c.name+" already matched!!"):(e.students.push(c),c.matched=!0)}},te=function(e){return e.sort((function(e,t){var i=e.minimum-e.students.length,n=t.minimum-t.students.length;return n-i}))},ie=function(e,t,i){return e.sort((function(e,n){for(var r=0,s=U()(i);r<s.length;r++){var o=s[r],a=q(t,e,i),c=q(t,n,i);if(Q(c[o]).length>Q(a[o]).length)return 1;if(Q(a[o]).length>Q(c[o]).length)return-1}return 0}))},ne=function(e){for(var t=e.students,i=e.courses,n=e.config,r=X(i),s=0,o=r;s<o.length;s++){var a=o[s],c=q(t,a,n.student.fields.priorities.length);console.log(a.name);var u=Y(a,c,n.student.fields.priorities.length);console.log("Minimal priority to fill to minimum "+(u.priority+1)+", index "+u.index);for(var l=0,f=U()(n.student.fields.priorities.length);l<f.length;l++){var h=f[l];console.log("Prio "+(h+1)+": "+c[h].length)}ee(a,c,u)}console.log("Second round");for(var d=0,p=te(r);d<p.length;d++){a=p[d],c=q(t,a,n.student.fields.priorities.length);var m=a.minimum-a.students.length,v=c.flat();console.log("Try to fill delta "+m+" for "+a.name);while(v.length>0&&a.minimum-a.students.length>0){var g=v.shift();g.matched?console.warn(g.name+" already matched!!"):(a.students.push(g),g.matched=!0)}}console.log("final round");for(var b=0,_=ie(r,t,n.student.fields.priorities.length);b<_.length;b++){a=_[b];console.log(a.name);c=q(t,a,n.student.fields.priorities.length);for(var y=0,w=U()(n.student.fields.priorities.length);y<w.length;y++){h=w[y];for(var C=0,x=U()(c[h].length);C<x.length;C++){x[C],g=c[h].shift();!g.matched&&a.students.length<a.limit?(a.students.push(g),g.matched=!0):console.warn(g.name+" already matched!!")}}}};function re(e){var t=e.students,i=e.courses,n=e.config;ue({students:t,courses:i,config:n});var r=n.student.shuffleBeforeMatch?F()(t):t,s=n.courses.shuffleBeforeMatch?X(F()(i)):X(i);return ne({students:r,courses:s,config:n}),{students:t,courses:i,config:n}}function se(e){var t=new Set;e.forEach((function(e){if(t.has(e.id))throw new H("Participant","id",new N({}));t.add(e.id)}))}function oe(e){var t=new Set;e.forEach((function(e){if(t.has(e.id))throw new H("Activity","id",new D({}));t.add(e.id)}))}function ae(e){e.forEach((function(e){var t=e.priorities.length,i=I()(e.priorities).length;if(t!==i)throw new H("Participant","priorities",e)}))}function ce(e,t){var i=t.map((function(e){return e.id}));e.forEach((function(e){e.priorities.forEach((function(t){if(!Z()(i,(function(e){return e===t})))throw new J("Activity",t,e)}))}))}var ue=function(e){var t=e.students,i=e.courses;oe(i),se(t),ce(t,i),ae(t)};function le(e){var t=e.workbook,i=e.config,n=x(t,i.courses.worksheet),r=n.map((function(e){return R(e,i.courses.fields)}));return{courses:r,workbook:t,config:i}}function fe(e){var t=e.workbook,i=e.courses,n=e.config,r=x(t,n.student.worksheet),s=r.map((function(e){return V(e,n.student.fields)}));return{workbook:t,students:s,courses:i,config:n}}var he={data(){return{filename:"",error:{message:""}}},methods:{loadExcel(e){const t=e.target.files[0];P(t).then(M).then(e=>(e.filename=t,e)).then(e=>this.$emit("excel-overview-loaded",e)).catch(e=>this.error.message=e.toString())}}},de=he,pe=Object(h["a"])(de,_,y,!1,null,null,null),me=pe.exports,ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v("Teilnehmer")]),i("label",{attrs:{for:"shuffleStudentsBeforeMatch"}},[e._v(" Vor dem Zuweisen mischen "),i("Explanation",{attrs:{text:"Ohne Mischen ist die Reihenfolge der Einträge in der Tabelle massgebend, d.h. frühe Einträge werden bevorzugt"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.participantsConfig.shuffleBeforeMatch,expression:"participantsConfig.shuffleBeforeMatch"}],attrs:{type:"checkbox",name:"shuffleStudentsBeforeMatch",id:"shuffleStudentsBeforeMatch"},domProps:{checked:Array.isArray(e.participantsConfig.shuffleBeforeMatch)?e._i(e.participantsConfig.shuffleBeforeMatch,null)>-1:e.participantsConfig.shuffleBeforeMatch},on:{change:function(t){var i=e.participantsConfig.shuffleBeforeMatch,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);n.checked?o<0&&e.$set(e.participantsConfig,"shuffleBeforeMatch",i.concat([s])):o>-1&&e.$set(e.participantsConfig,"shuffleBeforeMatch",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(e.participantsConfig,"shuffleBeforeMatch",r)}}}),i("h4",[e._v("Arbeitsblatt")]),i("am-multiselect",{attrs:{values:Object.keys(e.excelOverview.sheets)},on:{input:e.onChange},model:{value:e.participantsConfig.worksheet,callback:function(t){e.$set(e.participantsConfig,"worksheet",t)},expression:"participantsConfig.worksheet"}}),e.participantsConfig.worksheet?[i("h4",[e._v("Spalten")]),e._l(e.notPriorities(e.participantsConfig.fields),(function(t,n){return i("am-multiselect",{key:t.id,attrs:{values:e.excelOverview.sheets[e.participantsConfig.worksheet],label:e.labels[n]},on:{input:e.onChange},model:{value:e.participantsConfig.fields[n],callback:function(t){e.$set(e.participantsConfig.fields,n,t)},expression:"participantsConfig.fields[key]"}})})),e._l(e.participantsConfig.fields.priorities,(function(t,n){return i("div",[i("label",[e._v(e._s(n+1+". "+e.labels["priorities"]))]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.participantsConfig.fields.priorities[n].column,expression:"participantsConfig.fields.priorities[index].column"}],on:{input:e.onChange,change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.participantsConfig.fields.priorities[n],"column",t.target.multiple?i:i[0])}}},e._l(e.excelOverview.sheets[e.participantsConfig.worksheet],(function(t){return i("option",[e._v(" "+e._s(t)+" ")])})),0),i("button",{staticClass:"remove-priority",on:{click:function(t){return e.removePriority(n)}}},[e._v(" - ")])])})),i("button",{on:{click:function(t){return e.addPriority()}}},[e._v("Priorität hinzufügen")])]:e._e()],2)},ge=[],be=i("3eea"),_e=i.n(be),ye={components:{Explanation:p},props:["excelOverview"],data(){return{participantsConfig:{worksheet:"",shuffleBeforeMatch:!0,fields:{id:"",name:"",firstName:"",class:"",priorities:[]}},labels:{worksheet:"Arbeitsblatt",id:"ID",name:"Name",firstName:"Vorname",class:"Klasse",priorities:"Priorität"}}},methods:{onChange(){this.participantsConfig.worksheet&&(this.participantsConfig.fields.priorities=this.populatePriorities(),this.$emit("completed",this.participantsConfig))},notPriorities(){return _e()(this.participantsConfig.fields,"priorities")},removePriority(e){this.participantsConfig.fields.priorities.splice(e,1)},addPriority(){this.participantsConfig.fields.priorities.push({column:null})},populatePriorities(){const e=this.excelOverview.sheets[this.participantsConfig.worksheet],t=/^[\w\s]+[0-9]+$/;return e.filter(e=>t.test(e)).map(e=>({column:e}))}}},we=ye,Ce=(i("71c7"),Object(h["a"])(we,ve,ge,!1,null,"7cbdd41c",null)),xe=Ce.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticStyle:{color:"red"}},[e._v(e._s(e.errorMessage))]),e.config.student&&e.config.courses?i("button",{on:{click:e.matchAndWrite}},[e._v(" Prioritäten auflösen ")]):e._e()])},ke=[];function Pe(e){if(e instanceof J)return"Teilnehmer '"+e.referrer+"' verweist auf nicht-existierende Aktivität mit id='"+e.id+"'";if(e instanceof H)switch(e.propertyName){case"priorities":return"Prioritäten von '"+e.entity.toString()+"' sind nicht eindeutig.";case"id":return"IDs der "+Me(e.entity)+" sind nicht eindeutig.";default:break}return"Keine Übersetzung für Fehler: "+e}function Me(e){return e instanceof N?"Teilnehmer":"Aktivitäten"}var je={props:["config"],data(){return{errorMessage:""}},methods:{matchAndWrite(){this.errorMessage="",P(this.config.filename).then(e=>({workbook:e,config:this.config})).then(le).then(fe).then(re).then(e=>this.$emit("matched",e)).catch(e=>{throw this.errorMessage=Pe(e),e})}}},$e=je,Be=Object(h["a"])($e,Oe,ke,!1,null,null,null),Ee=Be.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.label?i("label",[e._v(e._s(e.label))]):e._e(),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],on:{input:e.onSelected,change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedValue=t.target.multiple?i:i[0]}}},[i("option",[e._v(e._s(e.initialValue))]),e._l(e.values,(function(t){return i("option",[e._v(e._s(t))])}))],2)])},Ae=[],De={props:["values","label"],methods:{onSelected(e){this.$emit("input",e.target.value),this.isPristine=!1},preSelect(){if(!this.label||!this.isPristine)return!1;const e=this.label.trim().toLowerCase();for(const t of this.values){const i=t.trim().toLowerCase();i.startsWith(e)&&(this.$emit("input",t),this.isPristine=!1,this.selectedValue=t)}}},data(){return{isPristine:!0,selectedValue:"Bitte auswählen",initialValue:"Bitte auswählen"}},mounted(){this.preSelect()},updated(){this.preSelect()}},Ne=De,Te=Object(h["a"])(Ne,Se,Ae,!1,null,null,null),Ve=Te.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.result.courses?i("div",{attrs:{id:"results-root"}},[e._m(0),i("Statistics",{attrs:{result:e.result}}),i("div",{attrs:{id:"results-successful"}},[i("ul",e._l(e.result.courses,(function(t){return i("li",[i("h3",[e._v(e._s(e.buildActivityResultHeader(t)))]),i("table",[e._m(1,!0),i("tbody",e._l(t.students,(function(n,r){return i("tr",[i("td",[e._v(e._s(r+1))]),i("td",[e._v(e._s(n.firstName))]),i("td",[e._v(e._s(n.name))]),i("td",[e._v(e._s(n.class))]),i("td",{staticClass:"priority-column"},[e._v(" "+e._s(n.priorities.indexOf(t.id)+1)+" ")])])})),0)])])})),0)]),i("div",{attrs:{id:"results-unassignable"}},[i("h3",[e._v("Nicht-zuweisbare Teilnehmer")]),e.findUnmatched(e.result.students).length>0?[i("table",[i("thead",[i("th",[e._v("#")]),i("th"),i("th"),i("th"),e._l(e.numberOfPriorities(e.result.students),(function(t){return i("th",[e._v(" Priorität "+e._s(t)+" ")])}))],2),i("tbody",e._l(e.findUnmatched(e.result.students),(function(t,n){return i("tr",[i("td",[e._v(e._s(n+1))]),i("td",[e._v(e._s(t.firstName))]),i("td",[e._v(e._s(t.name))]),i("td",[e._v(e._s(t.class))]),e._l(t.priorities,(function(t){return i("td",[e._v(" "+e._s(e.result.courses.find((function(e){return e.id===t})).name)+" ")])}))],2)})),0)])]:i("p",[e._v("Keine.")])],2)],1):e._e()},ze=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"results-config"}},[i("h2",[e._v("Resultat")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("th",[e._v("#")]),i("th"),i("th"),i("th"),i("th",[e._v("Priorität")])])}],Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"statistics-root"}},[i("div",{attrs:{id:"statistics-overview"}},[i("h3",[e._v("Zusammenfassung")]),i("table",[e._m(0),i("tbody",[e._l(e.result.courses,(function(t){return i("tr",[i("td",[e._v(e._s(t.name))]),i("td",{staticClass:"number"},[e._v(e._s(t.students.length))]),i("td",{staticClass:"number"},[e._v(e._s(t.minimum))]),i("td",{staticClass:"number"},[e._v(e._s(t.limit))])])})),i("tr",{staticClass:"totals"},[i("td",[e._v("Total")]),i("td",{staticClass:"number"},[e._v(" "+e._s(e.result.students.filter((function(e){return e.matched})).length)+" ")]),i("td",{staticClass:"number"},[e._v(" "+e._s(e.result.courses.map((function(e){return e.minimum})).reduce((function(e,t){return e+t})))+" ")]),i("td",{staticClass:"number"},[e._v(" "+e._s(e.result.courses.map((function(e){return e.limit})).reduce((function(e,t){return e+t})))+" ")])])],2)])]),i("div",{attrs:{id:"statistics-barchart"}},[i("h3",[e._v("Verteilung der erfüllten Prioritäten")]),i("BarChart",{attrs:{data:e.computePriorityDistribution(e.result)}})],1)])},Ze=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th"),i("th",[e._v("Zugewiesen")]),i("th",[e._v("Minimum")]),i("th",[e._v("Limit")])])])}],Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{staticClass:"chart",attrs:{viewBox:"0 0 400 250",width:"400",height:"250",xmlns:"http://www.w3.org/2000/svg",role:"img"}},e._l(e.data,(function(t,n,r){return i("g",{staticClass:"bar"},[i("text",{attrs:{dy:"15",x:"0",y:e.yOffset+r*e.barGap}},[e._v(e._s(n))]),i("text",{attrs:{dy:"15",x:t+90,y:e.yOffset+r*e.barGap}},[e._v(" "+e._s(t)+" ")]),i("rect",{attrs:{x:"80",y:e.yOffset+r*e.barGap,width:t,height:"20"}})])})),0)},Ie=[],Ke={name:"BarChart",props:["data"],data(){return{yOffset:0,barGap:40}}},Ue=Ke,We=(i("427a"),Object(h["a"])(Ue,Ge,Ie,!1,null,"7d8c0026",null)),Fe=We.exports;const He=e=>`${e+1}. Priorität`;var Je={components:{BarChart:Fe},name:"Statistics",props:["result"],methods:{computePriorityDistribution(e){const t={};for(const i of e.courses)for(const e of i.students){const n=e.priorities.indexOf(i.id);t[He(n)]?t[He(n)]++:t[He(n)]=1}return console.log(t),t}}},qe=Je,Qe=(i("c28f"),Object(h["a"])(qe,Le,Ze,!1,null,"be26e15c",null)),Xe=Qe.exports,Ye={components:{Statistics:Xe},props:["result"],data(){return{}},methods:{findUnmatched(e){return e.filter(e=>!e.matched)},numberOfPriorities(e){return U()(1,e[0].priorities.length+1)},buildActivityResultHeader(e){return`${e.name} (${e.students.length} / ${e.limit})`}}},et=Ye,tt=(i("0f16"),Object(h["a"])(et,Re,ze,!1,null,"6bb78878",null)),it=tt.exports;n["a"].component("am-multiselect",Ve);var nt={data(){return{excelOverview:null,matchConfig:{filename:null,courses:null,student:null},result:{courses:null}}},components:{"am-excel-reader":me,"am-activities-sheet-config":b,"am-participants-sheet-config":xe,"am-do-matching":Ee,"am-result-printer":it},methods:{onOverviewLoaded(e){this.excelOverview=e,this.matchConfig.filename=e.filename},activitiesConfigCompleted(e){this.matchConfig.courses=e},participantsConfigCompleted(e){this.matchConfig.student=e},onMatched(e){this.result=e}}},rt=nt,st=(i("7d00"),Object(h["a"])(rt,r,s,!1,null,null,null)),ot=st.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(ot)}}).$mount("#app")},c28f:function(e,t,i){"use strict";var n=i("0063"),r=i.n(n);r.a},c61d:function(e,t,i){}});
//# sourceMappingURL=main.3c976de1.js.map